ìº¡ìŠí™”ëŠ” ëª¨ë“ˆë“¤ì´ ì‹œìŠ¤í…œì˜ ë‹¤ë¥¸ ë¶€ë¶„ì— ëŒ€í•´ ì•Œì•„ì•¼ í•  ë‚´ìš©ì„ ì¤„ì—¬ì¤€ë‹¤. 

â†’ ë¬´ì–¸ê°€ë¥¼ ë³€ê²½í•´ì•¼ í•  ë•Œ í•¨ê»˜ ê³ ë ¤í•´ì•¼ í•  ëª¨ ë“ˆ ìˆ˜ê°€ ì ì–´ì ¸ì„œ ì½”ë“œë¥¼ ë³€ê²½í•˜ê¸° ì‰¬ì›Œì§„ë‹¤.

<aside>
ğŸ’¡

í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ ê°ì²´ì˜ í•„ë“œê°€ ê°€ë¦¬í‚¤ëŠ” ê°ì²´(ìœ„ì„ ê°ì²´)ë¥¼ ì•Œê³  ìˆìœ¼ë©´ í•´ë‹¹ ê°ì²´ì˜ ì¸í„°í˜ì´ìŠ¤ê°€ ë³€ê²½ë  ê²½ìš° ëª¨ë“  í´ë¼ì´ì–¸íŠ¸ ì½”ë“œë„ ìˆ˜ì •ë˜ì–´ì•¼ í•œë‹¤.

</aside>

ì´ê²Œ ë¬´ìŠ¨ ë§ì´ëƒâ€¦ ëŒ€ì¶© ì˜ˆë¥¼ ë“¤ë©´

```kotlin
data class Person(
    val name: String,
    val department: Department     
) {
    data class Department(   
        val chargeCode: Int,
        val manager: String
    )
}
```

ì´ëŸ° í´ë˜ìŠ¤ê°€ ìˆì„ ë•Œ, ì´ Person ê°ì²´ì˜ manaerë¥¼ ì•Œë ¤ë©´ í´ë¼ì´ì–¸íŠ¸ì—ì„  

```kotlin
fun main() {
    val person = Person(
        name = "ê¹€ë•ë°°",
        department = Person.Department(
            chargeCode = 104,
            manager = "ë§¤ë‹ˆì €"
        )
    )

		printManagerUpper(person)
    sendMail(person)
}

fun printManagerUpper(person: Person) =
    println(**person.department.manager**.uppercase())

fun sendMail(person: Person) {
    println("ë©”ì¼ì„ ë³´ëƒ…ë‹ˆë‹¤ â†’ ${**person.department.manager**}")
}
```

ì´ë ‡ê²Œ department ë¥¼ í†µí•´ managerë¥¼ ì§ì ‘ í˜¸ì¶œí•´ì•¼ í•œë‹¤.

ì´ë ‡ê²Œ ë  ê²½ìš°, ë§Œì•½ managerì˜ í•„ë“œëª…ì´ ë°”ë€ë‹¤ë©´?

```kotlin
data class Person(
    val name: String,
    val department: Department     
) {
    data class Department(   
        val chargeCode: Int,
        val **supervisor**: String
    )
}
```

ê·¸ëŸ¼ ì´ê²ƒì„ ì‚¬ìš©í•˜ëŠ” í´ë¼ì´ì–¸íŠ¸ ì½”ë“œë„ ë³€ê²½ë˜ì–´ì•¼ í•œë‹¤.

```kotlin
fun printManagerUpper(person: Person) =
    println(**person.department.supervisor**.uppercase())

fun sendMail(person: Person) {
    println("ë©”ì¼ì„ ë³´ëƒ…ë‹ˆë‹¤ â†’ ${**person.department.supervisor**}")
}
```

í˜¹ì€ ë§Œì•½ managerì˜ íƒ€ì…ì´ ë³€ê²½ëœë‹¤ë©´?

```kotlin
data class Person(
    val name: String,
    val department: Department            
) {
    data class Department(
        val chargeCode: Int,
        **val manager: List<String>**     
    )
}
```

í˜¹ì€ ë§Œì•½ managerë¼ëŠ” í”„ë¡œí¼í‹°ê°€ í•¨ìˆ˜ë¡œ ë³€ê²½ëœë‹¤ë©´?

```kotlin
data class Person(
    val name: String,
    val department: Department
) {
    data class Department(
        val chargeCode: Int,
    ) {
        **fun manager(): String = "ë§¤ë‹ˆì €"**
    }
}
```

**ê°ì²´ì˜ ìœ„ì„ ê°ì²´(Department)ëŠ” ìˆ¨ê²¨ì„œ ì‚¬ìš©í•˜ì**

```kotlin
data class Person(
    val name: String,
    private val department: Department      // â† ìˆ¨ê¹€
) {
    data class Department(
        val chargeCode: Int,
        val manager: String
    )

		// ì¤‘ê°œì, ê°ì²´ í˜¹ì€ ë©”ì„œë“œ
    val manager get() = department.manager
}

fun main() {
    val person = Person(
        name = "ê¹€ë•ë°°",
        department = Person.Department(
            chargeCode = 104,
            manager = "ë§¤ë‹ˆì €"
        )
    )

    **val ê¹€ë•ë°°manager = person.manager**
}
```

ì´ë ‡ê²Œ ìˆ¨ê¸°ë©´ Departmentì— ë³€ê²½ì‚¬í•­ì´ ìƒê²¨ë„ í´ë¼ì´ì–¸íŠ¸ ìª½ì—ì„œ ëŒ€ì‘í•  í•„ìš”ê°€ ì—†ë‹¤!

ê·¸ëŸ¼ Departmentì— ë³€ê²½ì‚¬í•­ì´ ìì£¼ ìƒê¸´ë‹¤ê±°ë‚˜, í™•ì •ë˜ì§€ ì•Šì•˜ë‹¤ê³  í•œë‹¤ë©´?

```kotlin
data class Person(
    val name: String,
    private val department: Department
) {
    fun manager(): String =
        when (department) {
            is DepartmentV1 -> department.manager
            is DepartmentV2 -> department.supervisor
            is DepartmentV3 -> department.manager()
        }

    sealed interface Department

    data class DepartmentV1(
        val chargeCode: Int,
        val manager: String
    ) : Department

    data class DepartmentV2(
        val chargeCode: Int,
        val supervisor: String
    ) : Department

    data class DepartmentV3(
        val chargeCode: Int,
    ) : Department {
        fun manager(): String = "ë§¤ë‹ˆì €"
    }

    companion object {
        // V1
        fun department(
            name: String,
            chargeCode: Int,
            manager: String,
        ): Person = Person(name, DepartmentV1(chargeCode, manager))

//        // V2
//        fun department(
//            name: String,
//            chargeCode: Int,
//            supervisor: String,
//        ): Person = Person(name, DepartmentV2(chargeCode, supervisor))
//
//        // V3
//        fun department(
//            name: String,
//            chargeCode: Int,
//        ): Person = Person(name, DepartmentV3(chargeCode))
    }
}
```

ì´ë ‡ê²Œ ë‚´ë¶€ì— sealed interfaceë¡œ í™•ì •ë˜ì§€ ì•Šì€ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ê³ , ë²„ì „ ë³„ë¡œ í´ë˜ìŠ¤ë¥¼ ìƒì„±í•œ ë’¤ static ë©”ì„œë“œë¡œ ìƒì„±í•  ìˆ˜ ìˆê²Œ ë§Œë“¤ë©´ ì„œë²„ì˜ ë³€ê²½ì´ ìƒê²¨ë„ 

í´ë¼ì´ì–¸íŠ¸ ìª½ì—ì„œëŠ” Department ê°ì²´ ìƒì„± static ë©”ì„œë“œ í•˜ë‚˜ë§Œ ë°”ê¾¸ë©´ ëœë‹¤. 

<aside>
ğŸ’¡

ë””ë¯¸í„°ì˜ ë²•ì¹™ì€ â€œê°ì²´ì˜ ë‚´ë¶€ êµ¬ì¡°(ë˜ëŠ” ë‚´ë¶€ì˜ ë‚´ë¶€)ê¹Œì§€ ë“¤ì—¬ë‹¤ë³´ì§€ ë§ê³ , ê·¸ ê°ì²´ì—ê²Œ ì›í•˜ëŠ” ê²°ê³¼ë¥¼ ì§ì ‘ ìš”ì²­í•˜ë¼â€ëŠ” ì„¤ê³„ ì§€ì¹¨ì´ë‹¤. ì´ë¥¼ ì§€í‚¤ë©´ ëª¨ë“ˆ ê°„ ê²°í•©ì´ ëŠìŠ¨í•´ì§€ê³  ë³€ê²½ì— ê°•í•œ ì½”ë“œê°€ ëœë‹¤.

</aside>

ê·¸ëŸ°ë° ë§Œì•½ Departmentì— í”„ë¡œí¼í‹°ê°€ ê³„ì† ì¶”ê°€ëœë‹¤?

```kotlin
data class Person(
    val name: String,
    private val department: Department      // â† ìˆ¨ê¹€
) {
    data class Department(
        val chargeCode: Int,
        val manager: String,
        val address: String,
    )

    val departmentChargeCode get() = department.chargeCode
    val departmentAddress get() = department.address
    val manager get() = department.manager
}
...
data class Person(
    val name: String,
    private val department: Department      // â† ìˆ¨ê¹€
) {
    data class Department(
        val chargeCode: Int,
        val manager: String,
        val address: String,
        val newProperty: String,
    )

    val departmentNewProperty get() = department.newProperty
    val departmentChargeCode get() = department.chargeCode
    val departmentAddress get() = department.address
    val manager get() = department.manager
}
```

ì´ë ‡ê²Œ ê³„ì† ì¤‘ê°œ ë©”ì„œë“œ í˜¹ì€ ê°ì²´ê°€ ëŠ˜ì–´ë‚œë‹¤â€¦ ì´ëŸ° ê²½ìš°ë¼ë©´?

ê·¸ëƒ¥ ì¤‘ê°œìë¥¼ ì œê±°í•˜ìâ€¦.

```kotlin
data class Person(
    val name: String,
    val department: Department
) {
    data class Department(
        val chargeCode: Int,
        val manager: String,
        val address: String,
        val newProperty: String,
    )
}
```

### ì ì ˆíˆ ë˜í•‘í•˜ê³ , ì ì ˆíˆ ìœ„ì„í•˜ì
